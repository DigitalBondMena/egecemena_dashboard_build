"use strict";(self.webpackChunkEgecDashboard=self.webpackChunkEgecDashboard||[]).push([[701],{701:(Y,m,r)=>{r.r(m),r.d(m,{LoginModule:()=>J});var p=r(9808),c=r(3623),s=r(2382),e=r(4893),f=r(2340),_=r(520);let b=(()=>{class t{constructor(o){this._HttpClient=o}login(o){return this._HttpClient.post(`${f.N.apiKey}auth/signin`,o)}}return t.\u0275fac=function(o){return new(o||t)(e.LFG(_.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var y=r(7053),C=r(2290),h=r(7691),l=r(4712),A=r(6610),v=r(9062);function x(t,i){if(1&t&&(e.TgZ(0,"h3",3),e._uU(1),e.qZA()),2&t){const o=e.oxw();e.xp6(1),e.Oqu(o.title)}}const w=["*"];let d=(()=>{class t{constructor(){this.adaptivePosition=!0,this.placement="top",this.triggers="click",this.outsideClick=!1,this.delay=0}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),T=(()=>{class t{constructor(o){this._placement="top",Object.assign(this,o)}set placement(o){this._placement=this._bsVersions.isBs5?l.Bz[o]:o}get _bsVersions(){return(0,h.Wl)()}checkMarginNecessity(){return(0,l.lx)(this._placement)}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(d))},t.\u0275cmp=e.Xpm({type:t,selectors:[["popover-container"]],hostAttrs:["role","tooltip",2,"display","block"],hostVars:7,hostBindings:function(o,n){2&o&&(e.uIk("id",n.popoverId),e.Tol("popover in popover-"+n._placement+" bs-popover-"+n._placement+" "+n._placement+" "+n.containerClass+" "+n.checkMarginNecessity()),e.ekj("show",!n._bsVersions.isBs3)("bs3",n._bsVersions.isBs3))},inputs:{placement:"placement",title:"title"},ngContentSelectors:w,decls:4,vars:1,consts:[[1,"popover-arrow","arrow"],["class","popover-title popover-header",4,"ngIf"],[1,"popover-content","popover-body"],[1,"popover-title","popover-header"]],template:function(o,n){1&o&&(e.F$t(),e._UZ(0,"div",0),e.YNc(1,x,2,1,"h3",1),e.TgZ(2,"div",2),e.Hsn(3),e.qZA()),2&o&&(e.xp6(1),e.Q6J("ngIf",n.title))},directives:[p.O5],styles:[".bs3.popover-top[_nghost-%COMP%]{margin-bottom:10px}.bs3.popover.top[_nghost-%COMP%] > .arrow[_ngcontent-%COMP%]{margin-left:-2px}.bs3.popover.top[_nghost-%COMP%]{margin-bottom:10px}.popover.bottom[_nghost-%COMP%] > .arrow[_ngcontent-%COMP%]{margin-left:-4px}.bs3.bs-popover-left[_nghost-%COMP%]{margin-right:.5rem}.bs3.bs-popover-right[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%], .bs3.bs-popover-left[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{margin:.3rem 0}"],changeDetection:0}),t})(),Z=0,I=(()=>{class t{constructor(o,n,u,a,g,R){this._elementRef=n,this._renderer=u,this._positionService=R,this.popoverId=Z++,this.adaptivePosition=!0,this.placement="top",this.outsideClick=!1,this.triggers="click",this.containerClass="",this.delay=0,this._isInited=!1,this._popover=g.createLoader(n,a,u).provide({provide:d,useValue:o}),Object.assign(this,o),this.onShown=this._popover.onShown,this.onHidden=this._popover.onHidden,"undefined"!=typeof window&&n.nativeElement.addEventListener("click",function(){try{n.nativeElement.focus()}catch(N){return}})}get isOpen(){return this._popover.isShown}set isOpen(o){o?this.show():this.hide()}setAriaDescribedBy(){this._ariaDescribedby=this.isOpen?`ngx-popover-${this.popoverId}`:void 0,this._ariaDescribedby?(this._popover.instance&&(this._popover.instance.popoverId=this._ariaDescribedby),this._renderer.setAttribute(this._elementRef.nativeElement,"aria-describedby",this._ariaDescribedby)):this._renderer.removeAttribute(this._elementRef.nativeElement,"aria-describedby")}show(){if(this._popover.isShown||!this.popover||this._delayTimeoutId)return;this._positionService.setOptions({modifiers:{flip:{enabled:this.adaptivePosition},preventOverflow:{enabled:this.adaptivePosition}}});const o=()=>{this._delayTimeoutId&&(this._delayTimeoutId=void 0),this._popover.attach(T).to(this.container).position({attachment:this.placement}).show({content:this.popover,context:this.popoverContext,placement:this.placement,title:this.popoverTitle,containerClass:this.containerClass}),!this.adaptivePosition&&this._popover._componentRef&&(this._positionService.calcPosition(),this._positionService.deletePositionElement(this._popover._componentRef.location)),this.isOpen=!0,this.setAriaDescribedBy()},n=()=>{this._popoverCancelShowFn&&this._popoverCancelShowFn()};if(this.delay){const u=(0,A.H)(this.delay).subscribe(()=>{o(),n()});this.triggers&&(0,h.AL)(this.triggers).forEach(a=>{!a.close||(this._popoverCancelShowFn=this._renderer.listen(this._elementRef.nativeElement,a.close,()=>{u.unsubscribe(),n()}))})}else o()}hide(){this._delayTimeoutId&&(clearTimeout(this._delayTimeoutId),this._delayTimeoutId=void 0),this.isOpen&&(this._popover.hide(),this.setAriaDescribedBy(),this.isOpen=!1)}toggle(){if(this.isOpen)return this.hide();this.show()}ngOnInit(){this._isInited||(this._isInited=!0,this._popover.listen({triggers:this.triggers,outsideClick:this.outsideClick,show:()=>this.show(),hide:()=>this.hide()}))}ngOnDestroy(){this._popover.dispose()}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(d),e.Y36(e.SBq),e.Y36(e.Qsj),e.Y36(e.s_b),e.Y36(v.oj),e.Y36(l.sA))},t.\u0275dir=e.lG2({type:t,selectors:[["","popover",""]],inputs:{adaptivePosition:"adaptivePosition",popover:"popover",popoverContext:"popoverContext",popoverTitle:"popoverTitle",placement:"placement",outsideClick:"outsideClick",triggers:"triggers",container:"container",containerClass:"containerClass",isOpen:"isOpen",delay:"delay"},outputs:{onShown:"onShown",onHidden:"onHidden"},exportAs:["bs-popover"]}),t})(),S=(()=>{class t{static forRoot(){return{ngModule:t,providers:[v.oj,l.sA]}}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[p.ez]]}),t})();function F(t,i){1&t&&(e.TgZ(0,"button",31),e._UZ(1,"i",32),e.qZA()),2&t&&e.Q6J("popover","\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0623\u0644\u0643\u062a\u0631\u0648\u0646\u064a \u0645\u0637\u0644\u0648\u0628")("placement","left")}function M(t,i){1&t&&(e.TgZ(0,"button",31),e._UZ(1,"i",32),e.qZA()),2&t&&e.Q6J("popover","\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0623\u0644\u0643\u062a\u0631\u0648\u0646\u064a \u063a\u064a\u0631 \u0635\u062d\u064a\u062d")("placement","left")}function L(t,i){1&t&&(e.TgZ(0,"button",33),e._UZ(1,"i",32),e.qZA()),2&t&&e.Q6J("popover","\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0623\u0644\u0643\u062a\u0631\u0648\u0646\u064a \u063a\u064a\u0631 \u0635\u062d\u064a\u062d")}function P(t,i){if(1&t&&(e.ynx(0),e.YNc(1,F,2,2,"button",29),e.YNc(2,M,2,2,"button",29),e.YNc(3,L,2,1,"button",30),e.BQk()),2&t){const o=e.oxw();e.xp6(1),e.Q6J("ngIf",o.loginForm.controls.email.errors.required),e.xp6(1),e.Q6J("ngIf",o.loginForm.controls.email.errors.email),e.xp6(1),e.Q6J("ngIf",o.loginForm.controls.email.errors.pattern)}}function O(t,i){1&t&&(e.TgZ(0,"button",34),e._UZ(1,"i",32),e.qZA()),2&t&&e.Q6J("popover","\u0643\u0644\u0645\u0629 \u0627\u0644\u0633\u0631 \u063a\u064a\u0631 \u0635\u062d\u064a\u062d\u0629")("placement","left")("outsideClick",!0)}function D(t,i){1&t&&(e.TgZ(0,"div",35)(1,"div",36)(2,"div",37)(3,"div",38),e._UZ(4,"img",39),e.qZA()()()())}const U=[{path:"",component:(()=>{class t{constructor(o,n,u,a,g){this._Renderer2=o,this._UserService=n,this._AuthenticationService=u,this._Router=a,this._ToastrService=g,this.loginForm=new s.cw({email:new s.NI("",[s.kI.required,s.kI.email,s.kI.pattern(/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/)]),password:new s.NI("",[s.kI.required])})}onLogin(o){this.actionLoading=!0,this._UserService.login(o.value).subscribe(n=>{if(console.log(n),n.access_token){let u=document.querySelector(".main_content");localStorage.setItem("currentUserToken",JSON.stringify(n.access_token)),localStorage.setItem("currentUserArray",JSON.stringify(n.user)),localStorage.setItem("currentUserExpiresIn",JSON.stringify(n.expires_in)),this._Renderer2.removeClass(document.body,"login"),this._Renderer2.addClass(document.body,"main"),this._Renderer2.addClass(u,"content"),this._AuthenticationService.saveCurrentUserToken(),this._Router.navigate(["/admin/home"]),this.actionLoading=!1}},n=>{console.log(n),401==n.status&&this._ToastrService.error("\u062a\u0623\u0643\u062f \u0645\u0646 \u0635\u062d\u0629 \u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a \u0648\u0643\u0644\u0645\u0629 \u0627\u0644\u0633\u0631","\u062d\u062f\u062b \u062e\u0637\u0623",{timeOut:6e3,positionClass:"toast-bottom-center"}),this.actionLoading=!1})}ngOnInit(){if(this.loading=!0,setTimeout(()=>{this.loading=!1},1500),null!==localStorage.getItem("currentUserToken"))this._Router.navigate(["/admin/home"]);else{let o=document.querySelector(".content");this._Renderer2.addClass(document.body,"login"),this._Renderer2.removeClass(document.body,"main"),this._Renderer2.removeClass(o,"content")}}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(e.Qsj),e.Y36(b),e.Y36(y.$),e.Y36(c.F0),e.Y36(C._W))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-login"]],decls:38,vars:5,consts:[[1,"container","px-sm-10"],[1,"row"],[1,"col-lg-6","d-none","d-xl-flex","flex-column","min-vh-screen"],[1,"-intro-x","d-flex","align-items-center","pt-5"],["alt","Rubick Bootstrap HTML Admin Template","src","assets/images/logos/logo.png",1,"w-250"],[1,"my-auto"],["alt","Rubick Bootstrap HTML Admin Template","src","assets/images/Login_vector.png",1,"-intro-x","w-65","mt-n16"],[1,"-intro-x","login-h1","text-white","fw-medium","fs-4xl","lh-base","mt-10","fw500"],[1,"-intro-x","login-h4","text-white"],[1,"col-lg-6","d-flex","py-5","py-xl-0","my-5","my-xl-0"],[1,"my-auto","mx-auto","w-75","bg-white","dark-bg-dark-1","bg-xl-transparent","px-5","px-sm-8","py-8","p-xl-0","rounded-2","shadow-md","shadow-xl-none","w-full","w-sm-3/4","w-lg-2/4","w-xl-auto"],["alt","Rubick Bootstrap HTML Admin Template","src","assets/images/logos/logo2.png",1,"d-xl-none","w-100"],[1,"-intro-x","login-h1","fw-medium","fs-4xl","lh-base","mt-10","fw500","d-xl-none"],[1,"-intro-x","login-h4","d-xl-none"],[3,"formGroup","ngSubmit"],[1,"intro-x","mt-8"],[1,"input__wrapper--container"],[1,"input__wrapper"],["type","text","formControlName","email","placeholder","\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0623\u0644\u0643\u062a\u0631\u0648\u0646\u064a",1,"form-control","py-3","px-4","border-gray-300","d-block"],[4,"ngIf"],["type","password","formControlName","password","placeholder","\u0643\u0644\u0645\u0629 \u0627\u0644\u0633\u0631",1,"form-control","py-3","px-4","border-gray-300","d-block","mt-4"],["type","button","class","btn-danger validation","triggers","mouseenter:mouseleave",3,"popover","placement","outsideClick",4,"ngIf"],[1,"intro-x","mt-5","mt-xl-8"],["type","submit",1,"btn","btn-primary","py-3","px-4","w-full","w-xl-32","align-top",3,"disabled"],[1,"footer","py-4","fixed-bottom"],[1,"d-flex","p-0","align-items-center","justify-content-center","text-white"],["target","_blank","href","https://digitalbondmena.com/",1,"mx-2"],["height","30px","src","assets/images/db.png","alt","",1,"mx-2"],["id","loading","style","background-image: url('assets/images/Loader.jpg')",4,"ngIf"],["type","button","class","btn-danger validation","triggers","mouseenter:mouseleave",3,"popover","placement",4,"ngIf"],["type","button","placement","left","class","btn-danger validation","triggers","mouseenter:mouseleave",3,"popover",4,"ngIf"],["type","button","triggers","mouseenter:mouseleave",1,"btn-danger","validation",3,"popover","placement"],[1,"fa","fa-exclamation"],["type","button","placement","left","triggers","mouseenter:mouseleave",1,"btn-danger","validation",3,"popover"],["type","button","triggers","mouseenter:mouseleave",1,"btn-danger","validation",3,"popover","placement","outsideClick"],["id","loading",2,"background-image","url('assets/images/Loader.jpg')"],[1,"loader"],[1,"loader-container"],[1,"loader-icon"],["src","assets/images/logos/pre-logo.png","alt",""]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),e._UZ(4,"img",4),e.qZA(),e.TgZ(5,"div",5),e._UZ(6,"img",6),e.TgZ(7,"h1",7),e._uU(8," \u0645\u0631\u062d\u0628\u064b\u0627 \u0628\u0643! "),e.qZA(),e.TgZ(9,"h4",8),e._uU(10," \u0642\u0645 \u0628\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644 \u0627\u0644\u0622\u0646 \u0644\u062a\u062a\u0645\u0643\u0646 \u0645\u0646 \u0625\u062f\u0627\u0631\u0629 \u0645\u0648\u0642\u0639\u0643 \u0648\u0643\u0630\u0644\u0643 \u0627\u0644\u0640 CRM \u0627\u0644\u062e\u0627\u0635 \u0628\u0643. "),e.qZA()()(),e.TgZ(11,"div",9)(12,"div",10),e._UZ(13,"img",11),e.TgZ(14,"h1",12),e._uU(15," \u0645\u0631\u062d\u0628\u064b\u0627 \u0628\u0643! "),e.qZA(),e.TgZ(16,"h4",13),e._uU(17," \u0642\u0645 \u0628\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644 \u0627\u0644\u0622\u0646 \u0644\u062a\u062a\u0645\u0643\u0646 \u0645\u0646 \u0625\u062f\u0627\u0631\u0629 \u0645\u0648\u0642\u0639\u0643 \u0648\u0643\u0630\u0644\u0643 \u0627\u0644\u0640 CRM \u0627\u0644\u062e\u0627\u0635 \u0628\u0643. "),e.qZA(),e.TgZ(18,"form",14),e.NdJ("ngSubmit",function(){return n.onLogin(n.loginForm)}),e.TgZ(19,"div",15)(20,"div",16)(21,"div",17),e._UZ(22,"input",18),e.qZA(),e.YNc(23,P,4,3,"ng-container",19),e.qZA(),e.TgZ(24,"div",16)(25,"div",17),e._UZ(26,"input",20),e.qZA(),e.YNc(27,O,2,3,"button",21),e.qZA()(),e.TgZ(28,"div",22)(29,"button",23),e._uU(30," \u062a\u0633\u062c\u064a\u0644 \u062f\u062e\u0648\u0644 "),e.qZA()()()()()()(),e.TgZ(31,"footer",24)(32,"p",25),e._uU(33,"\u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0642\u0648\u0642 \u0645\u062d\u0641\u0648\u0638\u0629 \u0645\u062f\u0639\u0648\u0645 \u0645\u0646 \u062f\u064a\u062c\u064a\u062a\u0627\u0644 \u0628\u0648\u0646\u062f"),e.TgZ(34,"a",26),e._UZ(35,"img",27),e.qZA(),e._uU(36,"\xa9 2022 "),e.qZA()(),e.YNc(37,D,5,0,"div",28)),2&o&&(e.xp6(18),e.Q6J("formGroup",n.loginForm),e.xp6(5),e.Q6J("ngIf",n.loginForm.controls.email.touched&&null!=n.loginForm.controls.email.errors),e.xp6(4),e.Q6J("ngIf",n.loginForm.controls.password.touched&&null!=n.loginForm.controls.password.errors),e.xp6(2),e.Q6J("disabled",!n.loginForm.valid),e.xp6(8),e.Q6J("ngIf",n.loading))},directives:[s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u,p.O5,I],styles:[""]}),t})()}];let k=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[c.Bz.forChild(U)],c.Bz]}),t})(),J=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[],imports:[[p.ez,k,s.UX,s.u5,S.forRoot()]]}),t})()}}]);